<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Stellar Echoes Control Room</title>

<!-- ===== CSS ===== -->
<style>
.params {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: repeat(6, auto);
    grid-auto-flow: column;
    column-gap: 100px;
    max-width: 700px; 
}
    
body {
    font-family: sans-serif;
    padding: 20px;
}

.param {
    margin-bottom: 15px;
}

.slider {
    width: 450px;
    --SliderColor: #1c1c1c
}
    
.number {
    width: 50px;
    margin-left: 10px;
}

/* ===== RANGE SLIDER STYLE ===== */

/* —Å–∞–º —Ç—Ä–µ–∫ */
input[type="range"] {
    -webkit-appearance: none;
    width: 300px;
    height: 4px;
    background: #000;
    border-radius: 2px;
    outline: none;
}

/* –±–µ–≥—É–Ω–æ–∫ (thumb) */
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    background: #000;
    border-radius: 50%;
    cursor: pointer;
}
    
</style>
</head>

<body>

<h2>Stellar Echoes Control Room</h2>

<button id="connect">üîå Connect</button>

<hr>

<!-- ===== PARAMETERS ===== -->
<div class="params">
    <!-- time = 0 -->
    <div class="param" data-name="0" data-min="200" data-max="1000" data-step="1">
      <label>Time</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- mix = 3 -->
    <div class="param" data-name="3" data-min="0" data-max="1000" data-step="1">
      <label>Mix</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- regen = 6 -->
    <div class="param" data-name="6" data-min="0" data-max="1000" data-step="1">
      <label>Regen</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- rate = 9 -->
    <div class="param" data-name="9" data-min="0" data-max="1000" data-step="1">
      <label>Rate</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- tone = 11 -->
    <div class="param" data-name="11" data-min="0" data-max="1000" data-step="1">
      <label>Tone</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- depth = 13 -->
    <div class="param" data-name="13" data-min="0" data-max="1000" data-step="1">
      <label>Depth</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>

    <!-- second column -->
    <!-- decay = 1 -->
    <div class="param" data-name="1" data-min="0" data-max="1000" data-step="1">
      <label>Decay</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- rvb mix = 4 -->
    <div class="param" data-name="4" data-min="0" data-max="1000" data-step="1">
      <label>Reverb Mix</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- rvb tone = 7 -->
    <div class="param" data-name="7" data-min="0" data-max="1000" data-step="1">
      <label>Reverb Tone</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- waveform = 10 -->
    <div class="param" data-name="10" data-min="0" data-max="3" data-step="1">
      <label>Waveform</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- tonesec = 12 -->
    <div class="param" data-name="12" data-min="0" data-max="1000" data-step="1">
      <label>Tone Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- depthsec = 14 -->
    <div class="param" data-name="14" data-min="0" data-max="1000" data-step="1">
      <label>Depth Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>

    <!-- third column -->
    <!-- buffersize = 2 -->
    <div class="param" data-name="2" data-min="0" data-max="2" data-step="1">
      <label>Buffer Size</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- drykill = 5 -->
    <div class="param" data-name="5" data-min="0" data-max="2" data-step="1">
      <label>Dry Mode</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- regensec = 8 -->
    <div class="param" data-name="8" data-min="0" data-max="1000" data-step="1">
      <label>Regen Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- subdivision = 8 -->
    <div class="param" data-name="16" data-min="0" data-max="2" data-step="1">
      <label>Subdivision</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- stereomode = 8 -->
    <div class="param" data-name="17" data-min="0" data-max="2" data-step="1">
      <label>Stereo Mode</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!-- depth third = 8 -->
    <div class="param" data-name="15" data-min="0" data-max="1000" data-step="1">
      <label>Time Mod</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    <!--
    <div class="param" data-name="tonesec" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Tone Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    
    <div class="param" data-name="depthsec" data-min="0.0" data-max="1.0" data-step="0.01">
      <label>Depth Secondary</label><br>
      <input type="range" class="slider">
      <input type="number" class="number">
    </div>
    -->
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
let port;
let writer;

async function connect() {
    port = await navigator.serial.requestPort();
    await port.open({ baudRate: 115200 });
    writer = port.writable.getWriter();
}

async function send(cmd) {
    if (!writer) return;
    await writer.write(new TextEncoder().encode(cmd + "\n"));
}

document.getElementById("connect").onclick = connect;

document.querySelectorAll(".param").forEach(param => {
    const name = param.dataset.name;
    const min  = parseFloat(param.dataset.min);
    const max  = parseFloat(param.dataset.max);
    const step = parseFloat(param.dataset.step);

    const slider = param.querySelector(".slider");
    const number = param.querySelector(".number");

    slider.min = number.min = min;
    slider.max = number.max = max;
    slider.step = number.step = step;

    slider.value = number.value = min;

    slider.oninput = () => {
        number.value = slider.value;
    };

    number.oninput = () => {
        slider.value = number.value;
    };

    slider.onchange = number.onchange = () => {
        send(`${name} ${slider.value}`);
    };
});
</script>

</body>
</html>



















